import requests
import json

def test_webhook(transaction):
   url = 'http://localhost:80/webhook'
  
   headers = {'Content-Type': 'application/json'}
  
   data = json.dumps(transaction)
  
   try:
       response = requests.post(url, headers=headers, data=data)
      
       print("Status Code:", response.status_code)
       print("Response:", response.json())
   except Exception as e:
       print(f"An error occurred: {e}")


transaction = [{"blockTime":1709141402,"indexWithinBlock":3,"meta":{"err":None,"fee":8500,"innerInstructions":[{"index":3,"instructions":[{"accounts":[6,2,4,5,7,15,1,2,4],"data":"eJ3vVttksFLT2nxhkeUHmqKGSh8r8Tkc8dDNx5g7agyjNJ2BDwmvuLby7FNn2dcxxmCkQn6VP1uh3jeaq7ZLfjjZy887KznQaCudr","programIdIndex":10},{"accounts":[8,3,12,0],"data":"2V99RAii29nP","programIdIndex":13}]}],"loadedAddresses":{"readonly":[],"writable":[]},"logMessages":["Program ComputeBudget111111111111111111111111111111 invoke [1]","Program ComputeBudget111111111111111111111111111111 success","Program ComputeBudget111111111111111111111111111111 invoke [1]","Program ComputeBudget111111111111111111111111111111 success","Program ComputeBudget111111111111111111111111111111 invoke [1]","Program ComputeBudget111111111111111111111111111111 success","Program FUfpR31LmcP1VSbz5zDaM7nxnH55iBHkpwusgrnhaFjL invoke [1]","Program log: Instruction: ConsumeOrderbookEvents","Program 5u8mLVnUSQNSbKdZPNGTfWHGwV5uJh9by5Fa6jb6BP6h invoke [2]","Program log: Instruction: Publish","Program 5u8mLVnUSQNSbKdZPNGTfWHGwV5uJh9by5Fa6jb6BP6h consumed 12879 of 1375857 compute units","Program 5u8mLVnUSQNSbKdZPNGTfWHGwV5uJh9by5Fa6jb6BP6h success","Program log: lz4:8E13QWxIQzRMOG03S2EzQU1qUlJoMzVoZkd1YTdTTERMN0lNL3VxWHNsT2FMQ3kyWDF2QmxmcGxOUFRGVlRSQzFRUlZKUUlDQWdJQ0FBVVlpaEFnQUFBQURoOVFVQQoAcEFGR0lvUUkLAPMgQkx0Tmh3akxhdS9xVnBHR2lUelZidkl0Um8xYnd2REFISzdqMDZsUi93em9VNy8BABF3OwCQb3VRRUFSRlVFDgAPAgAQ+R5uZzlwRm1lTUhzSEc4b1dFK0k3ZjJPNE9hZU5pWFp1c0ttVkhER3A3U1IvTVFQAJpIQ09BUURwVmcXAAoCAFNCUU5sWRMA7z09LDhHMEQyR2R1TU1PRQEt8x51MDJIQ010cTcrcFdrWWFKUE5WdThpMUdqVnZDOE1BY3J1UFRxVkgvRE9oVHYjAREvigBPR2k1QbQABh9FpQA6D14BLAGvAAMCAAXRAVBBQUFFPQ==","Program DchhQ6g8LyRCM5mnao1MAg3g9twfqBbDmUWgpQpFfn1b invoke [2]","Program log: Instruction: Consume Events","Program log: Number of events consumed: 3","Program DchhQ6g8LyRCM5mnao1MAg3g9twfqBbDmUWgpQpFfn1b consumed 2557 of 1299789 compute units","Program DchhQ6g8LyRCM5mnao1MAg3g9twfqBbDmUWgpQpFfn1b success","Program log: sequence: 284395","Program FUfpR31LmcP1VSbz5zDaM7nxnH55iBHkpwusgrnhaFjL consumed 104352 of 1399550 compute units","Program FUfpR31LmcP1VSbz5zDaM7nxnH55iBHkpwusgrnhaFjL success"],"postBalances":[5803774445053,448669440,448669440,1128932880,57795840,59911680,1002852480,1002240,2227200,1,1141440,2449920,0,1141440,1141440,0],"postTokenBalances":[],"preBalances":[5803774453553,448669440,448669440,1128932880,57795840,59911680,1002852480,1002240,2227200,1,1141440,2449920,0,1141440,1141440,0],"preTokenBalances":[],"rewards":[]},"slot":281816538,"transaction":{"message":{"accountKeys":["EyeYzc5qx7DiW5xt451eQHn5RLeagUEDX2SapDXu62Gy","3fFWfA1LQ6yBJ9v8xwQXF3tjj6qp1715Jt8BxBDJexAi","49nhg9sMyGMkhTFD25vCzKqdwHnPDnp6zoBKg4gCEYoT","5fboNVmSRgvcE7oeAk1fc7eVqHRAurjZKNHaFttBmgfj","7TZuB677rA75yTYJmStnP2uBkeK4jTLxcak3EgUkmu7s","9g22ajzxAcvJMXoxeisU8RhaWwcRoNrzPeTgN3eSgz8d","BRWNCEzQTm8kvEXHsVVY9jpb1VLbpv9B8mkF43nMLCtu","CfnmFJgYiX8wpoiZbRZVevj8ZZguNLwZ4TZgViPETZhC","Eg9gjsQUd5oXuv4zbHqWawEALZ1bAwQ4mpjVY373pL7g","ComputeBudget111111111111111111111111111111","5u8mLVnUSQNSbKdZPNGTfWHGwV5uJh9by5Fa6jb6BP6h","69E6SSDQC9t3QqXgZjVu5hPoK5jiWFQ489hVZvRwPSTS","6gLpG378xcpV3j3nStTqWJA7Zn46BoFh8bCK99GSA1nc","DchhQ6g8LyRCM5mnao1MAg3g9twfqBbDmUWgpQpFfn1b","FUfpR31LmcP1VSbz5zDaM7nxnH55iBHkpwusgrnhaFjL","FYpkZXMvQHRR2HDUMwPgC93kDAkFECAfQD9F9gtVjBX1"],"addressTableLookups":None,"header":{"numReadonlySignedAccounts":0,"numReadonlyUnsignedAccounts":7,"numRequiredSignatures":1},"instructions":[{"accounts":[],"data":"3nFMDjzgvRHh","programIdIndex":9},{"accounts":[],"data":"7YXqSw","programIdIndex":9},{"accounts":[],"data":"K1FDJ7","programIdIndex":9},{"accounts":[13,6,11,12,8,3,0,10,5,7,15,1,2,4],"data":"FuxCdZ5e83g19QukE7hf67","programIdIndex":14}],"recentBlockhash":"4EEPugFJjMbQC1UikTnE9VvTiXu5v4T4b1FNDykcRpm7"},"signatures":["39ZrJTJMT9BtzQTfQKnBY88vWpXp9UzxAoVd6K36duDt79qqWAkD3BBUTBCU4AYXvSJWdrNbjU3xaCAcq5zE7NCx"]},"version":"legacy"}]

test_webhook(transaction)